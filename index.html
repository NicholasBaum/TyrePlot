<head>
    <script src="https://cdn.plot.ly/plotly-2.24.2.min.js" charset="utf-8"></script>
</head>

<body>
    <div>
        <input type="file" id="fileInput">
        <span id="fileNameElement"></span>
    </div>
    <div id="plotElement"></div>
    <script>
        const input = document.getElementById('fileInput');
        input.addEventListener('change', function (event) {
            const file = event.target.files[0];
            loadCSVFile(file, render)
        })

        function render(data) {
            console.log(data);
            Plotly.newPlot("plotElement", /* JSON object */ {
                "data": [{ "y": [1, 2, 3] }],
                "layout": { "width": 600, "height": 400 }
            })
        }

        function parseCSV(csvData) {
            const lines = csvData.split('\n');
            const headers = lines[0].split(',');
            const data = [];

            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const row = {};
                for (let j = 0; j < headers.length - 1; j++) {
                    row[headers[j]] = values[j];
                }
                data.push(row);
            }
            return data;
        }


        function loadCSVFile(file, callback) {
            const reader = new FileReader();
            reader.onload = function (event) {
                const csvData = event.target.result;
                const parsedData = parseCSV(csvData);
                callback(parsedData);
            };
            reader.readAsText(file);
        }

    </script>
</body>